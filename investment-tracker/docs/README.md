# 投資紀錄表 - 專業桌面投資追蹤系統

一個功能完整的 **Electron 桌面應用程式**，專為個人投資組合管理而設計，支援股票、基金、加密貨幣和房地產投資的記錄與分析。

## 🌟 主要功能

### 📈 投資追蹤
- **股票投資**：支援台股和美股，自動計算持倉成本和獲利
- **基金投資**：支援買入和贖回，追蹤淨值變化
- **加密貨幣**：支援小數點8位精度，台幣計價
- **房地產**：預售屋房貸管理和繳款記錄

### 💰 智能分析
- **持倉管理**：自動計算每個標的的持有數量和平均成本
- **獲利計算**：賣出時自動計算獲利/虧損和報酬率
- **投資組合分析**：視覺化儀表板顯示資產配置
- **安全操作**：手動填寫表單進行交易，避免誤操作

### 🎨 現代化介面
- 採用 Material Design 3 設計規範
- 響應式設計，支援各種螢幕尺寸
- 直觀的卡片式佈局和自定義確認對話框
- 豐富的視覺化圖表和流暢動畫效果
- 一致性的視覺設計語言
- 智能表單佈局：加密貨幣和預售屋表單完美居中對齊

### 🖥️ 桌面應用程式特色
- **真正的桌面體驗**：原生視窗管理，無瀏覽器框架
- **直觀操作**：點擊 X 按鈕直接關閉程式，符合用戶習慣
- **獨立執行**：不依賴瀏覽器，完全自主的應用程式
- **一鍵啟動**：雙擊 `start.bat` 即可啟動，無需額外設定
- **自動隱藏**：啟動時命令提示字元自動隱藏，提供純淨體驗
- **簡潔介面**：乾淨的設計，只保留必要功能

## 🚀 快速開始

### 🏆 方法一：Electron 桌面應用程式（強烈推薦）

**最簡單的使用方式，享受完整桌面應用程式體驗：**

1. **下載專案**：
   ```bash
   git clone [你的倉庫地址]
   cd investment-tracker
   ```

2. **一鍵啟動**：
   - Windows：雙擊 `start.bat` 檔案
   - 或在命令列執行：`npm start`

3. **享受桌面體驗**：
   - ✅ 自動安裝相依套件（首次執行）
   - ✅ 自動隱藏命令提示字元
   - ✅ electron-store 持久化已啟用
   - ✅ 原生桌面視窗體驗

### 📱 桌面應用程式使用說明

#### 啟動與退出
- **啟動**：雙擊 `start.bat` → 自動隱藏命令列 → 應用程式開啟
- **退出**：點擊視窗 X 按鈕 → 程式直接關閉
- **資料安全**：每次操作都會自動儲存，無需擔心資料遺失

#### 資料狀態
- 🟢 **已連線**：electron-store 已就緒（綠色雲朵打勾）
- 🟠 **初始化中**：正在建立/檢查存儲（橙色儲存圖示）
- 🔴 **離線模式**：electron-store 不可用（紅色雲朵關閉）

### 🌐 方法二：網頁版本（備用選項）

如果需要在瀏覽器中使用：

```bash
# 啟動本地伺服器
cd investment-tracker
npx http-server -p 8080
# 然後在瀏覽器開啟 http://localhost:8080/door.html
```

## 📱 使用說明

### 🔋 資料狀態指示器
在應用程式右上角有一個智能資料狀態指示器：
- **🟢 已連線**：electron-store 已就緒（綠色雲朵打勾）
- **🟠 初始化中...**：正在初始化存儲（橙色儲存圖示）
- **🔴 離線模式**：electron-store 不可用（紅色雲朵關閉）

### 1. 股票投資
- 智能下拉選單：市場（台股/美股）、資產類型（股票/ETF）
- 輸入股票代碼、交易數量、價格
- 即時查詢股票名稱（輸入滿 2 字，300ms 節流）
- 系統自動計算持倉和獲利狀況
- 最新交易資料優先顯示

### 2. 基金投資
- 統一下拉選單：交易類型（買入/贖回）
- 記錄淨值和單位數
- 自動計算平均成本和持倉價值
- 最新交易資料優先顯示

### 3. 加密貨幣
- **完整圓角下拉選單**：支援 10 種主流加密貨幣
  - BTC (Bitcoin)、ETH (Ethereum)、BNB (Binance Coin)
  - ADA (Cardano)、SOL (Solana)、DOGE (Dogecoin)
  - SHIB (Shiba Inu)、DUST、USDC、OKB
- 支援小數點8位精度（如：0.00000001 BTC）
- 台幣計價，避免匯率困擾
- 智能輸入驗證，防止格式錯誤
- 最新交易資料優先顯示

### 4. 持倉分析
- 查看整體投資組合配置
- 各類資產的佔比和績效
- 未實現損益一目了然

## 💾 資料管理

### 🔒 資料儲存
- **Electron 模式（推薦）**：主要存儲為 electron-store（永久持久化）
- **瀏覽器模式（備用）**：僅使用 localStorage（可能遺失）
- **股票名稱快取**：使用 localStorage（僅影響名稱查詢，不含交易資料）

### 📊 匯出/匯入
- 支援 JSON 格式匯出/匯入
- 可備份資料或轉移到其他裝置
- 一鍵清除所有資料

## 🛠️ 技術特色

### 🖥️ Electron 桌面技術
- **跨平台桌面應用**：基於 Electron，支援 Windows、macOS、Linux
- **原生體驗**：真正的桌面視窗管理和系統整合
- **快捷鍵**：F5/Ctrl+R 重新整理，F12/Ctrl+Shift+I 開啟 DevTools
- **安全通信**：使用 contextBridge 確保前後端通信安全

### 💻 前端技術
- **Material Design 3**：Google 最新設計規範實現
- **自定義對話框**：統一的視覺風格，替代原生 confirm
- **模組化架構**：ES6+ 模組系統，程式碼結構清晰
- **嚴格 CSP**：允許 Yahoo API `connect-src`

### 🗃️ 技術重點
- **electron-store**：桌面端資料持久化
- **IPC 安全橋接**：`preload.js` 暴露 `window.electronAPI.store.*`
- **股票 API**：快取 + 重試 + 200ms 節流 + 最多 5 併發

## 📁 檔案結構
```
investment-tracker/
├── start.bat                # 🚀 一鍵啟動腳本（Windows）
├── door.html               # 主應用程式頁面
├── electron-main.js        # Electron 主進程
├── preload.js             # 安全通信橋樑（contextBridge）
├── package.json           # 專案配置和依賴
├── css/
│   ├── components/
│   ├── design-system/
│   └── responsive/responsive.css
├── js/
│   ├── api/               # 股票 API 與快取
│   ├── core/              # 狀態與事件
│   ├── data/              # storeManager（electron-store）
│   ├── features/          # 股票/基金/加密/房產/總覽
│   └── ui/                # UI 管理與表格
├── docs/
└── assets/
```

## ⚠️ 注意事項
1. 響應式參數僅允許在 `css/responsive/responsive.css`
2. 修復或新增功能時，需評估依賴關係且不得破壞既有功能
3. Electron 模式才有資料持久化；瀏覽器模式為示範用途
4. Windows 資料位置：`E:/InvestmentData/config.json`（`electron-main.js` 已設定 `cwd`）

## 🤝 支援與回饋
如果您在使用過程中遇到問題或有改進建議，歡迎提供回饋！

## 📄 授權
此專案採用 MIT 授權條款，您可以自由使用、修改和分發。

---

**開始您的投資追蹤之旅吧！** 📊💰 