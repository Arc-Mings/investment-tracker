# 更新日誌

## [2.1.0] - 2025-09-18 - 🎨 自定義下拉選單與UI標準化

### 🎆 新增功能

#### 自定義下拉選單系統
- **完美圓角效果**：所有下拉選單都使用自定義組件，實現 MD3 圓角設計
- **統一的使用者體驗**：所有頁籤的下拉選單都有一致的外觀和行為
- **智能互斥邏輯**：同時只能有一個下拉選單展開，符合業界標準
- **點擊外部關閉**：點擊選單外的區域自動關閉所有選單

#### 加密貨幣選項更新
- **新增熱門幣種**：
  - DOGE (Dogecoin) - 狗狗幣
  - SHIB (Shiba Inu) - 柴犬幣
  - USDC - 穩定幣
  - DUST - 新興代幣
  - OKB - 交易所代幣
- **標準化選單**：將幣種輸入改為下拉選單，與其他選單保持一致

### 🔧 技術改進

#### CSS 特異性優化
- **解決間距不一致問題**：修復加密貨幣表單中下拉選單的間距問題
- **提高 z-index**：確保下拉選單不被其他元素遮擋
- **overflow 優化**：修復選單被截斷的問題

#### JavaScript 組件化
- **全局管理器**：創建 CustomSelectManager 統一管理所有下拉選單
- **事件管理優化**：統一的點擊外部關閉邏輯
- **無障礙性支援**：完整的 ARIA 屬性和鍵盤導航

### 🎨 UI/UX 改進

#### 視覺一致性
- **統一的圓角效果**：所有下拉選單都使用相同的 MD3 圓角樣式
- **一致的間距**：所有選單都有相同的展開間距 (4px)
- **統一的動畫**：所有下拉選單都使用相同的展開/收起動畫

#### 使用者體驗優化
- **直覺的交互**：點擊任意下拉選單自動關閉其他選單
- **清晰的視覺回饋**：懸停和選中狀態有明確的視覺區分
- **無縫的操作體驗**：所有選單都支援鍵盤導航和觸控操作

### 📝 文件更新
- **README.md**：更新功能說明，反映新的下拉選單系統
- **ELECTRON_README.md**：新增自定義下拉選單的技術說明

---

## [2.0.2] - 2025-09-17 - 🛡️ 安全性與介面優化更新

### 🛡️ 安全性改進

#### 移除快速操作功能
- **移除快速賣出按鈕**：從股票和加密貨幣持倉表格中移除一鍵賣出功能
- **移除快速贖回按鈕**：從基金持倉表格中移除一鍵贖回功能
- **防止誤操作**：用戶現在必須手動填寫完整表單，避免意外交易
- **更安全的操作流程**：每筆交易都需要用戶明確確認所有參數

### 🎨 介面優化

#### 表單版面改進
- **股票表單優化**：
  - 移除重複的公司名稱欄位，透過API自動獲取
  - 修復「查詢中」字樣被誤存的問題
  - 買進表單：3+4 配置，賣出表單：4+4 配置
  - 價格標籤更明確：「買進價格」、「賣出價格」
- **表單居中設計**：
  - 加密貨幣表單：3+3 配置，完美居中對齊
  - 預售屋表單：3+3 配置，完美居中對齊
  - 提升視覺美感和用戶體驗

#### 持倉表格改進
- **清潔的持倉表格**：移除所有「操作」欄位，讓表格更簡潔明瞭
- **智能排序**：所有持倉表格按最後交易日期降序排列，最新交易在最上面
- **統一的操作體驗**：所有交易操作都通過統一的表單介面進行

### 🔧 技術優化
- **代碼清理**：移除 `quickSell` 和 `quickSellCrypto` 相關函數
- **事件處理簡化**：清理不必要的事件綁定和全域函數
- **模組化改進**：減少功能耦合，提高代碼可維護性

### 💭 設計理念
遵循「安全第一」的設計原則：
- 投資決策需要深思熟慮，避免衝動操作
- 每筆交易都應該經過完整的參數確認
- 簡潔的介面有助於用戶專注於重要資訊

---

## [2.0.1] - 2025-09-17 - 🎯 UI 設計簡化更新

### 🎨 使用者體驗改進

#### 簡化操作流程
- **移除複雜的選單系統**：刪除右上角三個點選單和「完全退出程式」選項
- **直觀關閉方式**：點擊 X 按鈕直接關閉程式，符合用戶習慣
- **乾淨的介面設計**：移除不必要的 UI 元素，專注於核心功能

#### 技術簡化
- **移除背景運行邏輯**：不再需要複雜的最小化到托盤功能
- **簡化視窗管理**：直接的開啟和關閉，無需額外的狀態管理
- **清理程式碼**：移除不必要的 IPC 通信和事件處理

### 💭 設計理念
遵循「簡單就是美」的設計哲學：
- 點擊 X 按鈕 = 直接關閉程式（最符合用戶預期）
- 資料自動儲存 = 無需擔心資料遺失
- 少即是多 = 移除不必要的功能複雜度

---

## [2.0.0] - 2025-09-17 - 🚀 Electron 桌面應用程式重大更新

### 🎉 重大新功能

#### 🖥️ Electron 桌面應用程式
- **全新桌面體驗**：從網頁應用升級為真正的桌面應用程式
- **一鍵啟動**：雙擊 `start.bat` 即可啟動，無需手動配置
- **背景運行**：關閉視窗不會退出程式，繼續在背景運行
- **自動隱藏命令列**：使用 VBScript 技術完全隱藏命令提示字元
- **原生視窗管理**：支援最小化、恢復、真正的桌面整合

#### 🎨 UI/UX 重大改進
- **自定義確認對話框**：統一的 Material Design 3 風格，替代原生 confirm
- **智能資料庫狀態指示器**：
  - 🟢 綠色雲朵打勾圖示 = SQLite 已連線
  - 🟠 橙色儲存圖示 = 連線中
  - 🔴 紅色雲朵關閉圖示 = 離線模式
- **標題完美居中**：解決應用程式標題偏移問題
- **流暢動畫效果**：彈性緩動和優雅的轉場效果

#### 🔧 技術架構優化
- **安全通信**：使用 Electron contextBridge 確保前後端通信安全
- **模組化重構**：更清晰的檔案結構和模組分離
- **錯誤處理改進**：更友善的錯誤訊息和故障恢復機制

### 🛠️ 改進內容

#### 啟動流程優化
- 移除自動開啟瀏覽器分頁的行為
- 優化資料庫連線重試機制（從 5 次減少到 2 次，每次等待時間從 2 秒減少到 1 秒）
- 改善首次啟動的套件安裝流程

#### 視窗管理
- 實現真正的背景運行機制
- 支援雙擊圖標重新顯示應用程式
- 添加應用程式選單，提供正確的退出方式
- 改善視窗關閉和恢復的用戶體驗

#### 資料安全
- 確保關閉視窗時資料不會遺失
- 自動儲存機制持續運作
- SQLite + localStorage 雙重備份確保資料安全

### 🔄 重大變更

#### 啟動方式變更
- **舊版**：需要手動啟動後端 + 前端，在瀏覽器中使用
- **新版**：雙擊 `start.bat` 即可啟動完整的桌面應用程式

#### 主程序變更
- 將 `package.json` 中的 `main` 從 `electron-working.js` 改為 `electron-main.js`
- 啟用完整的資料庫功能和後端服務整合

#### UI 行為變更
- 所有確認對話框現在使用自定義的 Material Design 風格
- 視窗關閉行為從「退出程式」改為「隱藏到背景」

### 📁 新增檔案
- `preload.js` - Electron 安全通信橋樑
- `start.bat` - 一鍵啟動腳本（替代 `start-investment-tracker.bat`）
- 自定義對話框相關 CSS 樣式

### 🗑️ 移除內容
- 移除 `start-investment-tracker.bat`（替換為 `start.bat`）
- 移除應用程式自動開啟瀏覽器的行為

### 🔧 技術細節

#### 依賴更新
- 無新增依賴，基於現有的 Electron 38.1.1

#### 兼容性
- 維持向後兼容性，舊的網頁版本依然可用
- 建議使用新的桌面版本以獲得最佳體驗

---

## [1.x.x] - 之前版本

### 基礎功能
- 股票、基金、加密貨幣、房地產投資記錄
- SQLite 資料庫整合
- Material Design 3 介面設計
- 響應式設計支援
- 投資組合分析功能

---

**注意**：從 1.x 版本升級到 2.0 版本時，您的資料會自動保留。建議在升級前先使用匯出功能備份資料。
