# 更新日誌

## [2.0.0] - 2025-09-17 - 🚀 Electron 桌面應用程式重大更新

### 🎉 重大新功能

#### 🖥️ Electron 桌面應用程式
- **全新桌面體驗**：從網頁應用升級為真正的桌面應用程式
- **一鍵啟動**：雙擊 `start.bat` 即可啟動，無需手動配置
- **背景運行**：關閉視窗不會退出程式，繼續在背景運行
- **自動隱藏命令列**：使用 VBScript 技術完全隱藏命令提示字元
- **原生視窗管理**：支援最小化、恢復、真正的桌面整合

#### 🎨 UI/UX 重大改進
- **自定義確認對話框**：統一的 Material Design 3 風格，替代原生 confirm
- **智能資料庫狀態指示器**：
  - 🟢 綠色雲朵打勾圖示 = SQLite 已連線
  - 🟠 橙色儲存圖示 = 連線中
  - 🔴 紅色雲朵關閉圖示 = 離線模式
- **標題完美居中**：解決應用程式標題偏移問題
- **流暢動畫效果**：彈性緩動和優雅的轉場效果

#### 🔧 技術架構優化
- **安全通信**：使用 Electron contextBridge 確保前後端通信安全
- **模組化重構**：更清晰的檔案結構和模組分離
- **錯誤處理改進**：更友善的錯誤訊息和故障恢復機制

### 🛠️ 改進內容

#### 啟動流程優化
- 移除自動開啟瀏覽器分頁的行為
- 優化資料庫連線重試機制（從 5 次減少到 2 次，每次等待時間從 2 秒減少到 1 秒）
- 改善首次啟動的套件安裝流程

#### 視窗管理
- 實現真正的背景運行機制
- 支援雙擊圖標重新顯示應用程式
- 添加應用程式選單，提供正確的退出方式
- 改善視窗關閉和恢復的用戶體驗

#### 資料安全
- 確保關閉視窗時資料不會遺失
- 自動儲存機制持續運作
- SQLite + localStorage 雙重備份確保資料安全

### 🔄 重大變更

#### 啟動方式變更
- **舊版**：需要手動啟動後端 + 前端，在瀏覽器中使用
- **新版**：雙擊 `start.bat` 即可啟動完整的桌面應用程式

#### 主程序變更
- 將 `package.json` 中的 `main` 從 `electron-working.js` 改為 `electron-main.js`
- 啟用完整的資料庫功能和後端服務整合

#### UI 行為變更
- 所有確認對話框現在使用自定義的 Material Design 風格
- 視窗關閉行為從「退出程式」改為「隱藏到背景」

### 📁 新增檔案
- `preload.js` - Electron 安全通信橋樑
- `start.bat` - 一鍵啟動腳本（替代 `start-investment-tracker.bat`）
- 自定義對話框相關 CSS 樣式

### 🗑️ 移除內容
- 移除 `start-investment-tracker.bat`（替換為 `start.bat`）
- 移除應用程式自動開啟瀏覽器的行為

### 🔧 技術細節

#### 依賴更新
- 無新增依賴，基於現有的 Electron 38.1.1

#### 兼容性
- 維持向後兼容性，舊的網頁版本依然可用
- 建議使用新的桌面版本以獲得最佳體驗

---

## [1.x.x] - 之前版本

### 基礎功能
- 股票、基金、加密貨幣、房地產投資記錄
- SQLite 資料庫整合
- Material Design 3 介面設計
- 響應式設計支援
- 投資組合分析功能

---

**注意**：從 1.x 版本升級到 2.0 版本時，您的資料會自動保留。建議在升級前先使用匯出功能備份資料。
